{"format_version":"1.2","terraform_version":"1.13.3","variables":{"additional_domain_name":{"value":"www.devsandbox.space"},"alb_api_domain_name":{"value":"api.devsandbox.space"},"certificate_domain_name":{"value":"devsandbox.space"},"region":{"value":"us-east-1"},"terraform_state_bucket":{"value":"lirw-backend"}},"planned_values":{"outputs":{"cloudfront_aliases":{"sensitive":false,"type":["set","string"],"value":["www.devsandbox.space"]},"cloudfront_arn":{"sensitive":false},"cloudfront_domain_name":{"sensitive":false},"cloudfront_hosted_zone_id":{"sensitive":false},"cloudfront_id":{"sensitive":false},"cloudfront_status":{"sensitive":false}},"root_module":{"child_modules":[{"resources":[{"address":"module.cloudfront.aws_cloudfront_cache_policy.caching_optimized","mode":"managed","type":"aws_cloudfront_cache_policy","name":"caching_optimized","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"comment":"test comment","default_ttl":50,"max_ttl":100,"min_ttl":1,"name":"Caching_optimized","parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookie_behavior":"none","cookies":[]}],"enable_accept_encoding_brotli":true,"enable_accept_encoding_gzip":true,"headers_config":[{"header_behavior":"none","headers":[]}],"query_strings_config":[{"query_string_behavior":"none","query_strings":[]}]}]},"sensitive_values":{"parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookies":[]}],"headers_config":[{"headers":[]}],"query_strings_config":[{"query_strings":[]}]}]}},{"address":"module.cloudfront.aws_cloudfront_distribution.my_distribution","mode":"managed","type":"aws_cloudfront_distribution","name":"my_distribution","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"aliases":["www.devsandbox.space"],"comment":null,"custom_error_response":[],"default_cache_behavior":[{"allowed_methods":["DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"],"cached_methods":["GET","HEAD","OPTIONS"],"compress":false,"field_level_encryption_id":null,"forwarded_values":[],"function_association":[],"lambda_function_association":[],"min_ttl":0,"realtime_log_config_arn":null,"response_headers_policy_id":null,"smooth_streaming":null,"target_origin_id":"api.devsandbox.space","viewer_protocol_policy":"redirect-to-https"}],"default_root_object":null,"enabled":true,"http_version":"http2","is_ipv6_enabled":false,"logging_config":[],"ordered_cache_behavior":[],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[{"name":"X-Custom-Header","value":"random-value-123456"}],"custom_origin_config":[{"http_port":80,"https_port":443,"origin_keepalive_timeout":5,"origin_protocol_policy":"https-only","origin_read_timeout":30,"origin_ssl_protocols":["TLSv1.2"]}],"domain_name":"api.devsandbox.space","origin_access_control_id":"","origin_id":"api.devsandbox.space","origin_path":"","origin_shield":[],"s3_origin_config":[]}],"origin_group":[],"price_class":"PriceClass_All","restrictions":[{"geo_restriction":[{"restriction_type":"none"}]}],"retain_on_delete":false,"tags":{"Name":"lirw-three-tier-app"},"tags_all":{"Name":"lirw-three-tier-app"},"viewer_certificate":[{"acm_certificate_arn":"arn:aws:acm:us-east-1:513410254332:certificate/996360c1-8ef5-454c-a8dc-2f062eff1fed","cloudfront_default_certificate":null,"iam_certificate_id":null,"minimum_protocol_version":"TLSv1.2_2018","ssl_support_method":"sni-only"}],"wait_for_deployment":true},"sensitive_values":{"aliases":[false],"custom_error_response":[],"default_cache_behavior":[{"allowed_methods":[false,false,false,false,false,false,false],"cached_methods":[false,false,false],"forwarded_values":[],"function_association":[],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[],"origin":[{"custom_header":[{}],"custom_origin_config":[{"origin_ssl_protocols":[false]}],"origin_shield":[],"s3_origin_config":[]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":[]}]}],"tags":{},"tags_all":{},"trusted_key_groups":[],"trusted_signers":[],"viewer_certificate":[{}]}},{"address":"module.cloudfront.aws_cloudfront_origin_request_policy.only-host-header","mode":"managed","type":"aws_cloudfront_origin_request_policy","name":"only-host-header","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"comment":"Forwards only the Host header to ALB origin","cookies_config":[{"cookie_behavior":"all","cookies":[]}],"headers_config":[{"header_behavior":"whitelist","headers":[{"items":["host"]}]}],"name":"only-host-header","query_strings_config":[{"query_string_behavior":"none","query_strings":[]}]},"sensitive_values":{"cookies_config":[{"cookies":[]}],"headers_config":[{"headers":[{"items":[false]}]}],"query_strings_config":[{"query_strings":[]}]}},{"address":"module.cloudfront.aws_wafv2_ip_set.block_ipset","mode":"managed","type":"aws_wafv2_ip_set","name":"block_ipset","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"addresses":["103.179.122.6/32","203.187.235.23/32"],"description":"IP Set for blocking specific IPs","ip_address_version":"IPV4","name":"block-ip-set","scope":"CLOUDFRONT","tags":{"Environment":"production"},"tags_all":{"Environment":"production"}},"sensitive_values":{"addresses":[false,false],"tags":{},"tags_all":{}}},{"address":"module.cloudfront.aws_wafv2_web_acl.alb_acl","mode":"managed","type":"aws_wafv2_web_acl","name":"alb_acl","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[],"block":[{"custom_response":[]}]}],"description":"Minimal WAF: only CloudFront header allowed - block simple SQLi and  XSS","name":"alb-waf-customHeader-sqli-xss","rule":[{"action":[{"allow":[{"custom_request_handling":[]}],"block":[],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"name":"allow-cloudfront-header","override_action":[],"priority":1,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[],"single_header":[{"name":"x-custom-header"}],"single_query_argument":[],"uri_path":[]}],"positional_constraint":"EXACTLY","search_string":"random-value-123456","text_transformation":[{"priority":0,"type":"NONE"}]}],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"allow-cloudfront-header","sampled_requests_enabled":true}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"name":"block-simple-sqli","override_action":[],"priority":10,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[{}],"single_header":[],"single_query_argument":[],"uri_path":[]}],"text_transformation":[{"priority":0,"type":"URL_DECODE"},{"priority":1,"type":"LOWERCASE"}]}],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"block-simple-sqli","sampled_requests_enabled":true}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"name":"block-simple-xss","override_action":[],"priority":11,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[{}],"single_header":[],"single_query_argument":[],"uri_path":[]}],"text_transformation":[{"priority":0,"type":"URL_DECODE"},{"priority":1,"type":"HTML_ENTITY_DECODE"},{"priority":2,"type":"LOWERCASE"}]}]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"block-simple-xss","sampled_requests_enabled":true}]}],"scope":"REGIONAL","tags":{"Environment":"dev"},"tags_all":{"Environment":"dev"},"token_domains":null,"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"alb-waf-customHeader-sqli-xss-metrics","sampled_requests_enabled":true}]},"sensitive_values":{"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[],"block":[{"custom_response":[]}]}],"rule":[{"action":[{"allow":[{"custom_request_handling":[]}],"block":[],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[],"single_header":[{}],"single_query_argument":[],"uri_path":[]}],"text_transformation":[{}]}],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[{}],"single_header":[],"single_query_argument":[],"uri_path":[]}],"text_transformation":[{},{}]}],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[{}],"single_header":[],"single_query_argument":[],"uri_path":[]}],"text_transformation":[{},{},{}]}]}],"visibility_config":[{}]}],"tags":{},"tags_all":{},"visibility_config":[{}]}},{"address":"module.cloudfront.aws_wafv2_web_acl.block_web_acl","mode":"managed","type":"aws_wafv2_web_acl","name":"block_web_acl","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"description":"Web ACL with IP Set rule","name":"block-web-acl","rule":[{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"name":"block-bad-useragents","override_action":[],"priority":3,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[],"single_header":[{"name":"user-agent"}],"single_query_argument":[],"uri_path":[]}],"positional_constraint":"CONTAINS","search_string":"curl","text_transformation":[{"priority":0,"type":"NONE"}]}],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"block-bad-useragents","sampled_requests_enabled":true}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"name":"block-empty-useragent","override_action":[],"priority":4,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[{"comparison_operator":"LT","field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[],"single_header":[{"name":"user-agent"}],"single_query_argument":[],"uri_path":[]}],"size":1,"text_transformation":[{"priority":0,"type":"NONE"}]}],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"block-empty-useragent","sampled_requests_enabled":true}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"name":"limit-ip-rate","override_action":[],"priority":2,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[{"aggregate_key_type":"IP","forwarded_ip_config":[],"limit":100,"scope_down_statement":[]}],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"limit-ip-rate","sampled_requests_enabled":true}]},{"action":[{"allow":[],"block":[],"captcha":[{"custom_request_handling":[]}],"challenge":[],"count":[]}],"captcha_config":[],"name":"block-ip-set-rule","override_action":[],"priority":1,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[{"ip_set_forwarded_ip_config":[]}],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"block-ip-set-rule","sampled_requests_enabled":true}]}],"scope":"CLOUDFRONT","tags":{"Environment":"dev"},"tags_all":{"Environment":"dev"},"token_domains":null,"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"not-block-ip-set","sampled_requests_enabled":true}]},"sensitive_values":{"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"rule":[{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[],"single_header":[{}],"single_query_argument":[],"uri_path":[]}],"text_transformation":[{}]}],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[],"single_header":[{}],"single_query_argument":[],"uri_path":[]}],"text_transformation":[{}]}],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[{"forwarded_ip_config":[],"scope_down_statement":[]}],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[{"allow":[],"block":[],"captcha":[{"custom_request_handling":[]}],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[{"ip_set_forwarded_ip_config":[]}],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]}],"tags":{},"tags_all":{},"visibility_config":[{}]}},{"address":"module.cloudfront.aws_wafv2_web_acl_association.assoc","mode":"managed","type":"aws_wafv2_web_acl_association","name":"assoc","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"resource_arn":"arn:aws:elasticloadbalancing:us-east-1:513410254332:loadbalancer/app/lirw-three-tier-app-alb/b717cf4bec0e7cff","timeouts":null},"sensitive_values":{}}],"address":"module.cloudfront"},{"resources":[{"address":"module.route53.aws_route53_record.api_alb_alias","mode":"managed","type":"aws_route53_record","name":"api_alb_alias","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"alias":[{"evaluate_target_health":false,"name":"lirw-three-tier-app-alb-75250121.us-east-1.elb.amazonaws.com","zone_id":"Z35SXDOTRQ7X7K"}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"api.devsandbox.space","records":null,"set_identifier":null,"ttl":null,"type":"A","weighted_routing_policy":[],"zone_id":"Z01883253QKY9CDJWMTTM"},"sensitive_values":{"alias":[{}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"latency_routing_policy":[],"weighted_routing_policy":[]}},{"address":"module.route53.aws_route53_record.cloudfront[\"www.devsandbox.space\"]","mode":"managed","type":"aws_route53_record","name":"cloudfront","index":"www.devsandbox.space","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"alias":[{"evaluate_target_health":false}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"www.devsandbox.space","records":null,"set_identifier":null,"ttl":null,"type":"A","weighted_routing_policy":[],"zone_id":"Z01883253QKY9CDJWMTTM"},"sensitive_values":{"alias":[{}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"latency_routing_policy":[],"weighted_routing_policy":[]}},{"address":"module.route53.aws_route53_record.cloudfront_record","mode":"managed","type":"aws_route53_record","name":"cloudfront_record","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"alias":[{"evaluate_target_health":false}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"devsandbox.space","records":null,"set_identifier":null,"ttl":null,"type":"A","weighted_routing_policy":[],"zone_id":"Z01883253QKY9CDJWMTTM"},"sensitive_values":{"alias":[{}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"latency_routing_policy":[],"weighted_routing_policy":[]}}],"address":"module.route53"}]}},"resource_changes":[{"address":"module.cloudfront.aws_cloudfront_cache_policy.caching_optimized","module_address":"module.cloudfront","mode":"managed","type":"aws_cloudfront_cache_policy","name":"caching_optimized","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"comment":"test comment","default_ttl":50,"max_ttl":100,"min_ttl":1,"name":"Caching_optimized","parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookie_behavior":"none","cookies":[]}],"enable_accept_encoding_brotli":true,"enable_accept_encoding_gzip":true,"headers_config":[{"header_behavior":"none","headers":[]}],"query_strings_config":[{"query_string_behavior":"none","query_strings":[]}]}]},"after_unknown":{"etag":true,"id":true,"parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookies":[]}],"headers_config":[{"headers":[]}],"query_strings_config":[{"query_strings":[]}]}]},"before_sensitive":false,"after_sensitive":{"parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookies":[]}],"headers_config":[{"headers":[]}],"query_strings_config":[{"query_strings":[]}]}]}}},{"address":"module.cloudfront.aws_cloudfront_distribution.my_distribution","module_address":"module.cloudfront","mode":"managed","type":"aws_cloudfront_distribution","name":"my_distribution","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"aliases":["www.devsandbox.space"],"comment":null,"custom_error_response":[],"default_cache_behavior":[{"allowed_methods":["DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"],"cached_methods":["GET","HEAD","OPTIONS"],"compress":false,"field_level_encryption_id":null,"forwarded_values":[],"function_association":[],"lambda_function_association":[],"min_ttl":0,"realtime_log_config_arn":null,"response_headers_policy_id":null,"smooth_streaming":null,"target_origin_id":"api.devsandbox.space","viewer_protocol_policy":"redirect-to-https"}],"default_root_object":null,"enabled":true,"http_version":"http2","is_ipv6_enabled":false,"logging_config":[],"ordered_cache_behavior":[],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[{"name":"X-Custom-Header","value":"random-value-123456"}],"custom_origin_config":[{"http_port":80,"https_port":443,"origin_keepalive_timeout":5,"origin_protocol_policy":"https-only","origin_read_timeout":30,"origin_ssl_protocols":["TLSv1.2"]}],"domain_name":"api.devsandbox.space","origin_access_control_id":"","origin_id":"api.devsandbox.space","origin_path":"","origin_shield":[],"s3_origin_config":[]}],"origin_group":[],"price_class":"PriceClass_All","restrictions":[{"geo_restriction":[{"restriction_type":"none"}]}],"retain_on_delete":false,"tags":{"Name":"lirw-three-tier-app"},"tags_all":{"Name":"lirw-three-tier-app"},"viewer_certificate":[{"acm_certificate_arn":"arn:aws:acm:us-east-1:513410254332:certificate/996360c1-8ef5-454c-a8dc-2f062eff1fed","cloudfront_default_certificate":null,"iam_certificate_id":null,"minimum_protocol_version":"TLSv1.2_2018","ssl_support_method":"sni-only"}],"wait_for_deployment":true},"after_unknown":{"aliases":[false],"arn":true,"caller_reference":true,"custom_error_response":[],"default_cache_behavior":[{"allowed_methods":[false,false,false,false,false,false,false],"cache_policy_id":true,"cached_methods":[false,false,false],"default_ttl":true,"forwarded_values":[],"function_association":[],"lambda_function_association":[],"max_ttl":true,"origin_request_policy_id":true,"trusted_key_groups":true,"trusted_signers":true}],"domain_name":true,"etag":true,"hosted_zone_id":true,"id":true,"in_progress_validation_batches":true,"last_modified_time":true,"logging_config":[],"ordered_cache_behavior":[],"origin":[{"custom_header":[{}],"custom_origin_config":[{"origin_ssl_protocols":[false]}],"origin_shield":[],"s3_origin_config":[]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":true}]}],"status":true,"tags":{},"tags_all":{},"trusted_key_groups":true,"trusted_signers":true,"viewer_certificate":[{}],"web_acl_id":true},"before_sensitive":false,"after_sensitive":{"aliases":[false],"custom_error_response":[],"default_cache_behavior":[{"allowed_methods":[false,false,false,false,false,false,false],"cached_methods":[false,false,false],"forwarded_values":[],"function_association":[],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[],"origin":[{"custom_header":[{}],"custom_origin_config":[{"origin_ssl_protocols":[false]}],"origin_shield":[],"s3_origin_config":[]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":[]}]}],"tags":{},"tags_all":{},"trusted_key_groups":[],"trusted_signers":[],"viewer_certificate":[{}]}}},{"address":"module.cloudfront.aws_cloudfront_origin_request_policy.only-host-header","module_address":"module.cloudfront","mode":"managed","type":"aws_cloudfront_origin_request_policy","name":"only-host-header","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"comment":"Forwards only the Host header to ALB origin","cookies_config":[{"cookie_behavior":"all","cookies":[]}],"headers_config":[{"header_behavior":"whitelist","headers":[{"items":["host"]}]}],"name":"only-host-header","query_strings_config":[{"query_string_behavior":"none","query_strings":[]}]},"after_unknown":{"cookies_config":[{"cookies":[]}],"etag":true,"headers_config":[{"headers":[{"items":[false]}]}],"id":true,"query_strings_config":[{"query_strings":[]}]},"before_sensitive":false,"after_sensitive":{"cookies_config":[{"cookies":[]}],"headers_config":[{"headers":[{"items":[false]}]}],"query_strings_config":[{"query_strings":[]}]}}},{"address":"module.cloudfront.aws_wafv2_ip_set.block_ipset","module_address":"module.cloudfront","mode":"managed","type":"aws_wafv2_ip_set","name":"block_ipset","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"addresses":["103.179.122.6/32","203.187.235.23/32"],"description":"IP Set for blocking specific IPs","ip_address_version":"IPV4","name":"block-ip-set","scope":"CLOUDFRONT","tags":{"Environment":"production"},"tags_all":{"Environment":"production"}},"after_unknown":{"addresses":[false,false],"arn":true,"id":true,"lock_token":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"addresses":[false,false],"tags":{},"tags_all":{}}}},{"address":"module.cloudfront.aws_wafv2_web_acl.alb_acl","module_address":"module.cloudfront","mode":"managed","type":"aws_wafv2_web_acl","name":"alb_acl","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[],"block":[{"custom_response":[]}]}],"description":"Minimal WAF: only CloudFront header allowed - block simple SQLi and  XSS","name":"alb-waf-customHeader-sqli-xss","rule":[{"action":[{"allow":[{"custom_request_handling":[]}],"block":[],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"name":"allow-cloudfront-header","override_action":[],"priority":1,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[],"single_header":[{"name":"x-custom-header"}],"single_query_argument":[],"uri_path":[]}],"positional_constraint":"EXACTLY","search_string":"random-value-123456","text_transformation":[{"priority":0,"type":"NONE"}]}],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"allow-cloudfront-header","sampled_requests_enabled":true}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"name":"block-simple-sqli","override_action":[],"priority":10,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[{}],"single_header":[],"single_query_argument":[],"uri_path":[]}],"text_transformation":[{"priority":0,"type":"URL_DECODE"},{"priority":1,"type":"LOWERCASE"}]}],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"block-simple-sqli","sampled_requests_enabled":true}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"name":"block-simple-xss","override_action":[],"priority":11,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[{}],"single_header":[],"single_query_argument":[],"uri_path":[]}],"text_transformation":[{"priority":0,"type":"URL_DECODE"},{"priority":1,"type":"HTML_ENTITY_DECODE"},{"priority":2,"type":"LOWERCASE"}]}]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"block-simple-xss","sampled_requests_enabled":true}]}],"scope":"REGIONAL","tags":{"Environment":"dev"},"tags_all":{"Environment":"dev"},"token_domains":null,"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"alb-waf-customHeader-sqli-xss-metrics","sampled_requests_enabled":true}]},"after_unknown":{"arn":true,"capacity":true,"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[],"block":[{"custom_response":[]}]}],"id":true,"lock_token":true,"rule":[{"action":[{"allow":[{"custom_request_handling":[]}],"block":[],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[],"single_header":[{}],"single_query_argument":[],"uri_path":[]}],"text_transformation":[{}]}],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[{}],"single_header":[],"single_query_argument":[],"uri_path":[]}],"text_transformation":[{},{}]}],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[{}],"single_header":[],"single_query_argument":[],"uri_path":[]}],"text_transformation":[{},{},{}]}]}],"visibility_config":[{}]}],"tags":{},"tags_all":{},"visibility_config":[{}]},"before_sensitive":false,"after_sensitive":{"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[],"block":[{"custom_response":[]}]}],"rule":[{"action":[{"allow":[{"custom_request_handling":[]}],"block":[],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[],"single_header":[{}],"single_query_argument":[],"uri_path":[]}],"text_transformation":[{}]}],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[{}],"single_header":[],"single_query_argument":[],"uri_path":[]}],"text_transformation":[{},{}]}],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[{}],"single_header":[],"single_query_argument":[],"uri_path":[]}],"text_transformation":[{},{},{}]}]}],"visibility_config":[{}]}],"tags":{},"tags_all":{},"visibility_config":[{}]}}},{"address":"module.cloudfront.aws_wafv2_web_acl.block_web_acl","module_address":"module.cloudfront","mode":"managed","type":"aws_wafv2_web_acl","name":"block_web_acl","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"description":"Web ACL with IP Set rule","name":"block-web-acl","rule":[{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"name":"block-bad-useragents","override_action":[],"priority":3,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[],"single_header":[{"name":"user-agent"}],"single_query_argument":[],"uri_path":[]}],"positional_constraint":"CONTAINS","search_string":"curl","text_transformation":[{"priority":0,"type":"NONE"}]}],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"block-bad-useragents","sampled_requests_enabled":true}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"name":"block-empty-useragent","override_action":[],"priority":4,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[{"comparison_operator":"LT","field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[],"single_header":[{"name":"user-agent"}],"single_query_argument":[],"uri_path":[]}],"size":1,"text_transformation":[{"priority":0,"type":"NONE"}]}],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"block-empty-useragent","sampled_requests_enabled":true}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"name":"limit-ip-rate","override_action":[],"priority":2,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[{"aggregate_key_type":"IP","forwarded_ip_config":[],"limit":100,"scope_down_statement":[]}],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"limit-ip-rate","sampled_requests_enabled":true}]},{"action":[{"allow":[],"block":[],"captcha":[{"custom_request_handling":[]}],"challenge":[],"count":[]}],"captcha_config":[],"name":"block-ip-set-rule","override_action":[],"priority":1,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[{"ip_set_forwarded_ip_config":[]}],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"block-ip-set-rule","sampled_requests_enabled":true}]}],"scope":"CLOUDFRONT","tags":{"Environment":"dev"},"tags_all":{"Environment":"dev"},"token_domains":null,"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"not-block-ip-set","sampled_requests_enabled":true}]},"after_unknown":{"arn":true,"capacity":true,"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"id":true,"lock_token":true,"rule":[{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[],"single_header":[{}],"single_query_argument":[],"uri_path":[]}],"text_transformation":[{}]}],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[],"single_header":[{}],"single_query_argument":[],"uri_path":[]}],"text_transformation":[{}]}],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[{"forwarded_ip_config":[],"scope_down_statement":[]}],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[{"allow":[],"block":[],"captcha":[{"custom_request_handling":[]}],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[{"arn":true,"ip_set_forwarded_ip_config":[]}],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]}],"tags":{},"tags_all":{},"visibility_config":[{}]},"before_sensitive":false,"after_sensitive":{"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"rule":[{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[],"single_header":[{}],"single_query_argument":[],"uri_path":[]}],"text_transformation":[{}]}],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[{"field_to_match":[{"all_query_arguments":[],"body":[],"cookies":[],"headers":[],"json_body":[],"method":[],"query_string":[],"single_header":[{}],"single_query_argument":[],"uri_path":[]}],"text_transformation":[{}]}],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[{"forwarded_ip_config":[],"scope_down_statement":[]}],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[{"allow":[],"block":[],"captcha":[{"custom_request_handling":[]}],"challenge":[],"count":[]}],"captcha_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[{"ip_set_forwarded_ip_config":[]}],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]}],"tags":{},"tags_all":{},"visibility_config":[{}]}}},{"address":"module.cloudfront.aws_wafv2_web_acl_association.assoc","module_address":"module.cloudfront","mode":"managed","type":"aws_wafv2_web_acl_association","name":"assoc","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"resource_arn":"arn:aws:elasticloadbalancing:us-east-1:513410254332:loadbalancer/app/lirw-three-tier-app-alb/b717cf4bec0e7cff","timeouts":null},"after_unknown":{"id":true,"web_acl_arn":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.route53.aws_route53_record.api_alb_alias","module_address":"module.route53","mode":"managed","type":"aws_route53_record","name":"api_alb_alias","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alias":[{"evaluate_target_health":false,"name":"lirw-three-tier-app-alb-75250121.us-east-1.elb.amazonaws.com","zone_id":"Z35SXDOTRQ7X7K"}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"api.devsandbox.space","records":null,"set_identifier":null,"ttl":null,"type":"A","weighted_routing_policy":[],"zone_id":"Z01883253QKY9CDJWMTTM"},"after_unknown":{"alias":[{}],"allow_overwrite":true,"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":true,"geolocation_routing_policy":[],"id":true,"latency_routing_policy":[],"weighted_routing_policy":[]},"before_sensitive":false,"after_sensitive":{"alias":[{}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"latency_routing_policy":[],"weighted_routing_policy":[]}}},{"address":"module.route53.aws_route53_record.cloudfront[\"www.devsandbox.space\"]","module_address":"module.route53","mode":"managed","type":"aws_route53_record","name":"cloudfront","index":"www.devsandbox.space","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alias":[{"evaluate_target_health":false}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"www.devsandbox.space","records":null,"set_identifier":null,"ttl":null,"type":"A","weighted_routing_policy":[],"zone_id":"Z01883253QKY9CDJWMTTM"},"after_unknown":{"alias":[{"name":true,"zone_id":true}],"allow_overwrite":true,"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":true,"geolocation_routing_policy":[],"id":true,"latency_routing_policy":[],"weighted_routing_policy":[]},"before_sensitive":false,"after_sensitive":{"alias":[{}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"latency_routing_policy":[],"weighted_routing_policy":[]}}},{"address":"module.route53.aws_route53_record.cloudfront_record","module_address":"module.route53","mode":"managed","type":"aws_route53_record","name":"cloudfront_record","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alias":[{"evaluate_target_health":false}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"health_check_id":null,"latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"devsandbox.space","records":null,"set_identifier":null,"ttl":null,"type":"A","weighted_routing_policy":[],"zone_id":"Z01883253QKY9CDJWMTTM"},"after_unknown":{"alias":[{"name":true,"zone_id":true}],"allow_overwrite":true,"cidr_routing_policy":[],"failover_routing_policy":[],"fqdn":true,"geolocation_routing_policy":[],"id":true,"latency_routing_policy":[],"weighted_routing_policy":[]},"before_sensitive":false,"after_sensitive":{"alias":[{}],"cidr_routing_policy":[],"failover_routing_policy":[],"geolocation_routing_policy":[],"latency_routing_policy":[],"weighted_routing_policy":[]}}}],"output_changes":{"cloudfront_aliases":{"actions":["create"],"before":null,"after":["www.devsandbox.space"],"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"cloudfront_arn":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"cloudfront_domain_name":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"cloudfront_hosted_zone_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"cloudfront_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"cloudfront_status":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.13.3","values":{"outputs":{"cloudfront_aliases":{"sensitive":false,"value":["www.devsandbox.space"],"type":["set","string"]}},"root_module":{"resources":[{"address":"data.terraform_remote_state.compute","mode":"data","type":"terraform_remote_state","name":"compute","provider_name":"terraform.io/builtin/terraform","schema_version":0,"values":{"backend":"s3","config":{"bucket":"lirw-backend","key":"compute/lirw-app.tfstate","region":"us-east-1"},"defaults":null,"outputs":{"alb_dns_name":"lirw-three-tier-app-alb-75250121.us-east-1.elb.amazonaws.com","alb_zone_id":"Z35SXDOTRQ7X7K","internal_alb_dns_name":"internal-lirw-three-tier-app-internal-alb-54173834.us-east-1.elb.amazonaws.com","internal_tg_arn":"arn:aws:elasticloadbalancing:us-east-1:513410254332:targetgroup/lirw-three-tier-app-internal-tg/87e9de08a4cedc29","public_alb_arn":"arn:aws:elasticloadbalancing:us-east-1:513410254332:loadbalancer/app/lirw-three-tier-app-alb/b717cf4bec0e7cff","tg_arn":"arn:aws:elasticloadbalancing:us-east-1:513410254332:targetgroup/lirw-three-tier-app-tg/17fbf608de02f7e1"},"workspace":null},"sensitive_values":{"config":{},"outputs":{}}},{"address":"data.terraform_remote_state.network","mode":"data","type":"terraform_remote_state","name":"network","provider_name":"terraform.io/builtin/terraform","schema_version":0,"values":{"backend":"s3","config":{"bucket":"lirw-backend","key":"network/lirw-app.tfstate","region":"us-east-1"},"defaults":null,"outputs":{"alb_sg_id":"sg-0a415b954bb563a5d","client_sg_id":"sg-0b1c69ba52497f36d","db_sg_id":"sg-07c592db207cbe50a","igw_id":{"arn":"arn:aws:ec2:us-east-1:513410254332:internet-gateway/igw-0ffd8ce3ceb608414","id":"igw-0ffd8ce3ceb608414","owner_id":"513410254332","tags":{"Name":"lirw-three-tier-app-igw"},"tags_all":{"Name":"lirw-three-tier-app-igw"},"timeouts":null,"vpc_id":"vpc-055738207ce5153df"},"internal_alb_sg_id":"sg-0536fa87e6bb981e2","lirw_bucket_name":"lirw-app-bucket","pri_rt_a_id":"rtb-06f1a6be06a419cac","pri_rt_b_id":"rtb-01ef2b0b1fada5581","pri_sub_3a_id":"subnet-0dec5c13c98f08789","pri_sub_4b_id":"subnet-06f22a4b68497468a","pri_sub_5a_id":"subnet-033491d7f6ae733f5","pri_sub_6b_id":"subnet-087ecc242516a4e3f","pri_sub_7a_id":"subnet-0a05d515b4a5163f6","pri_sub_8b_id":"subnet-078f3a85b13172ab9","project_name":"lirw-three-tier-app","pub_sub_1a_id":"subnet-0dc6995c7787f1d58","pub_sub_2b_id":"subnet-01b89a75f0dcbf04e","region":"us-east-1","server_sg_id":"sg-07969f0fd2896112e","vpc_cidr_block":"10.0.0.0/16","vpc_id":"vpc-055738207ce5153df"},"workspace":null},"sensitive_values":{"config":{},"outputs":{"igw_id":{"tags":{},"tags_all":{}}}}}],"child_modules":[{"resources":[{"address":"module.cloudfront.data.aws_acm_certificate.issued","mode":"data","type":"aws_acm_certificate","name":"issued","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:acm:us-east-1:513410254332:certificate/996360c1-8ef5-454c-a8dc-2f062eff1fed","certificate":"-----BEGIN CERTIFICATE-----\nMIIF7TCCBNWgAwIBAgIQAfM8kSWmfH5hryPgPW22ITANBgkqhkiG9w0BAQsFADA8\nMQswCQYDVQQGEwJVUzEPMA0GA1UEChMGQW1hem9uMRwwGgYDVQQDExNBbWF6b24g\nUlNBIDIwNDggTTA0MB4XDTI1MTEwMzAwMDAwMFoXDTI2MTIwMjIzNTk1OVowGzEZ\nMBcGA1UEAxMQZGV2c2FuZGJveC5zcGFjZTCCASIwDQYJKoZIhvcNAQEBBQADggEP\nADCCAQoCggEBANfHoY/R6Ix5U+Rf1nJJyqQDAT/ZO0hnX7VRGLXvOJsM38uJ8+Dm\npjijrEa2XTdJttbt9EX2gCO6UDHxbiT5zKqtvHSVhFFPuvmeCD4PVPSTDnVIYGE/\nZVAJgSuZ31wf4P1hvGUVzUt3JZvcNpEQqeZwuFEpBvqQg8cwA7jjovOoenfe2s/G\nAKNUVqGDXdYGoS3h9ZuVQDzyFbKGPQZADE8JO06Xt3kw+1pnrPTBzN+kc1e0ZVo6\n3rUykyE3YXZ5JgOPPUqEd0EvgTZ+ByRRzd3Qjo4h1KvJoUf3cnBIzSdbNbBFRGW9\nDAw9GqTJhjjaXXHTAXDrpPtvtywF5w7kzP8CAwEAAaOCAwowggMGMB8GA1UdIwQY\nMBaAFB9SkmFWglR/gWbYHT0KqjJch90IMB0GA1UdDgQWBBSMv2hJPXsd/GeXrNg4\n6CFtZiBPFjBHBgNVHREEQDA+ghBkZXZzYW5kYm94LnNwYWNlghR3d3cuZGV2c2Fu\nZGJveC5zcGFjZYIUYXBpLmRldnNhbmRib3guc3BhY2UwEwYDVR0gBAwwCjAIBgZn\ngQwBAgEwDgYDVR0PAQH/BAQDAgWgMBMGA1UdJQQMMAoGCCsGAQUFBwMBMDsGA1Ud\nHwQ0MDIwMKAuoCyGKmh0dHA6Ly9jcmwucjJtMDQuYW1hem9udHJ1c3QuY29tL3Iy\nbTA0LmNybDB1BggrBgEFBQcBAQRpMGcwLQYIKwYBBQUHMAGGIWh0dHA6Ly9vY3Nw\nLnIybTA0LmFtYXpvbnRydXN0LmNvbTA2BggrBgEFBQcwAoYqaHR0cDovL2NydC5y\nMm0wNC5hbWF6b250cnVzdC5jb20vcjJtMDQuY2VyMAwGA1UdEwEB/wQCMAAwggF9\nBgorBgEEAdZ5AgQCBIIBbQSCAWkBZwB1ANgJVTuUT3r/yBYZb5RPhauw+Pxeh1Um\nDxXRLnK7RUsUAAABmkqNHmwAAAQDAEYwRAIgRpNvzCMuoHBXsrcMq7IckI+bIv/6\nnNNewfbyvSWAHvACIHyIJj9N+BDBAHZwqEd/SS7JtvFFGCzJw/CL4r9OoIYKAHcA\nwjF+V0UZo0XufzjespBB68fCIVoiv3/Vta12mtkOUs0AAAGaSo0eYwAABAMASDBG\nAiEAgQXwK6gc05qMs3G2hIxPgKXwjgqK4PT1LFow7DV3bKICIQDaz1QFlUBSCieX\nUWJodzuNBrdBYRnfkVXF86EPSSjaDgB1AJROQ4f67MHvgfMZJCaoGGUBx9NfOAIB\nP3JnfVU3LhnYAAABmkqNHnUAAAQDAEYwRAIgMpCdc3HikQej4M6xYzF8sZMIevZv\nxBdKIcglX5yX2iICIF3tZ0m4N7H3nurgGMvgq8tz2FP9rOzh4dcQxrzMxyZlMA0G\nCSqGSIb3DQEBCwUAA4IBAQB/dzvmZItaUqc5skByJCinNKI34FFE5nvXlVhA9YdB\n94rYZ7qoKKO9o//q2rPSkck2XuM7SyS+1gLtYTO71d1Fc1FROWumltYOQZy4vlE+\nWMATXi905LFZH8ZOaeL1gpeHH6t1QfnRAFPsmvIjlBNEx4PdgxJPC4M6krOinK+v\nChEW4xJEn4gtmPS9ikKPvbE3YPtGHj1a1yr2XMuBuOP1WVMwW4Ihcg2bha0fZEjG\n3mf3n/LyqK5WRH5B6K+Z+4S47oyro55D5eWJ/TaX3uG8+B7m31h0hUrGam4yzZAa\nocs/c4Y9Lt2jWw6fMe2WI/QM6yvNjzA05z/AwCb8nAnl\n-----END CERTIFICATE-----\n","certificate_chain":"-----BEGIN CERTIFICATE-----\nMIIEXjCCA0agAwIBAgITB3MSTyqVLj7Rili9uF0bwM5fJzANBgkqhkiG9w0BAQsF\nADA5MQswCQYDVQQGEwJVUzEPMA0GA1UEChMGQW1hem9uMRkwFwYDVQQDExBBbWF6\nb24gUm9vdCBDQSAxMB4XDTIyMDgyMzIyMjYzNVoXDTMwMDgyMzIyMjYzNVowPDEL\nMAkGA1UEBhMCVVMxDzANBgNVBAoTBkFtYXpvbjEcMBoGA1UEAxMTQW1hem9uIFJT\nQSAyMDQ4IE0wNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAM3pVR6A\nlQOp4xe776FdePXyejgA38mYx1ou9/jrpV6Sfn+/oqBKgwhY6ePsQHHQayWBJdBn\nv4Wz363qRI4XUh9swBFJ11TnZ3LqOMvHmWq2+loA0QPtOfXdJ2fHBLrBrngtJ/GB\n0p5olAVYrSZgvQGP16Rf8ddtNyxEEhYm3HuhmNi+vSeAq1tLYJPAvRCXonTpWdSD\nxY6hvdmxlqTYi82AtBXSfpGQ58HHM0hw0C6aQakghrwWi5fGslLOqzpimNMIsT7c\nqa0GJx6JfKqJqmQQNplO2h8n9ZsFJgBowof01ppdoLAWg6caMOM0om/VILKaa30F\n9W/r8Qjah7ltGVkCAwEAAaOCAVowggFWMBIGA1UdEwEB/wQIMAYBAf8CAQAwDgYD\nVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAdBgNV\nHQ4EFgQUH1KSYVaCVH+BZtgdPQqqMlyH3QgwHwYDVR0jBBgwFoAUhBjMhTTsvAyU\nlC4IWZzHshBOCggwewYIKwYBBQUHAQEEbzBtMC8GCCsGAQUFBzABhiNodHRwOi8v\nb2NzcC5yb290Y2ExLmFtYXpvbnRydXN0LmNvbTA6BggrBgEFBQcwAoYuaHR0cDov\nL2NydC5yb290Y2ExLmFtYXpvbnRydXN0LmNvbS9yb290Y2ExLmNlcjA/BgNVHR8E\nODA2MDSgMqAwhi5odHRwOi8vY3JsLnJvb3RjYTEuYW1hem9udHJ1c3QuY29tL3Jv\nb3RjYTEuY3JsMBMGA1UdIAQMMAowCAYGZ4EMAQIBMA0GCSqGSIb3DQEBCwUAA4IB\nAQA+1O5UsAaNuW3lHzJtpNGwBnZd9QEYFtxpiAnIaV4qApnGS9OCw5ZPwie7YSlD\nZF5yyFPsFhUC2Q9uJHY/CRV1b5hIiGH0+6+w5PgKiY1MWuWT8VAaJjFxvuhM7a/e\nfN2TIw1Wd6WCl6YRisunjQOrSP+unqC8A540JNyZ1JOE3jVqat3OZBGgMvihdj2w\nY23EpwesrKiQzkHzmvSH67PVW4ycbPy08HVZnBxZ5NrlGG9bwXR3fNTaz+c+Ej6c\n5AnwI3qkOFgSkg3Y75cdFz6pO/olK+e3AqygAcv0WjzmkDPuBjssuZjCHMC56oH3\nGJkV29Di2j5prHJbwZjG1inU\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIEkjCCA3qgAwIBAgITBn+USionzfP6wq4rAfkI7rnExjANBgkqhkiG9w0BAQsF\nADCBmDELMAkGA1UEBhMCVVMxEDAOBgNVBAgTB0FyaXpvbmExEzARBgNVBAcTClNj\nb3R0c2RhbGUxJTAjBgNVBAoTHFN0YXJmaWVsZCBUZWNobm9sb2dpZXMsIEluYy4x\nOzA5BgNVBAMTMlN0YXJmaWVsZCBTZXJ2aWNlcyBSb290IENlcnRpZmljYXRlIEF1\ndGhvcml0eSAtIEcyMB4XDTE1MDUyNTEyMDAwMFoXDTM3MTIzMTAxMDAwMFowOTEL\nMAkGA1UEBhMCVVMxDzANBgNVBAoTBkFtYXpvbjEZMBcGA1UEAxMQQW1hem9uIFJv\nb3QgQ0EgMTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALJ4gHHKeNXj\nca9HgFB0fW7Y14h29Jlo91ghYPl0hAEvrAIthtOgQ3pOsqTQNroBvo3bSMgHFzZM\n9O6II8c+6zf1tRn4SWiw3te5djgdYZ6k/oI2peVKVuRF4fn9tBb6dNqcmzU5L/qw\nIFAGbHrQgLKm+a/sRxmPUDgH3KKHOVj4utWp+UhnMJbulHheb4mjUcAwhmahRWa6\nVOujw5H5SNz/0egwLX0tdHA114gk957EWW67c4cX8jJGKLhD+rcdqsq08p8kDi1L\n93FcXmn/6pUCyziKrlA4b9v7LWIbxcceVOF34GfID5yHI9Y/QCB/IIDEgEw+OyQm\njgSubJrIqg0CAwEAAaOCATEwggEtMA8GA1UdEwEB/wQFMAMBAf8wDgYDVR0PAQH/\nBAQDAgGGMB0GA1UdDgQWBBSEGMyFNOy8DJSULghZnMeyEE4KCDAfBgNVHSMEGDAW\ngBScXwDfqgHXMCs4iKK4bUqc8hGRgzB4BggrBgEFBQcBAQRsMGowLgYIKwYBBQUH\nMAGGImh0dHA6Ly9vY3NwLnJvb3RnMi5hbWF6b250cnVzdC5jb20wOAYIKwYBBQUH\nMAKGLGh0dHA6Ly9jcnQucm9vdGcyLmFtYXpvbnRydXN0LmNvbS9yb290ZzIuY2Vy\nMD0GA1UdHwQ2MDQwMqAwoC6GLGh0dHA6Ly9jcmwucm9vdGcyLmFtYXpvbnRydXN0\nLmNvbS9yb290ZzIuY3JsMBEGA1UdIAQKMAgwBgYEVR0gADANBgkqhkiG9w0BAQsF\nAAOCAQEAYjdCXLwQtT6LLOkMm2xF4gcAevnFWAu5CIw+7bMlPLVvUOTNNWqnkzSW\nMiGpSESrnO09tKpzbeR/FoCJbM8oAxiDR3mjEH4wW6w7sGDgd9QIpuEdfF7Au/ma\neyKdpwAJfqxGF4PcnCZXmTA5YpaP7dreqsXMGz7KQ2hsVxa81Q4gLv7/wmpdLqBK\nbRRYh5TmOTFffHPLkIhqhBGWJ6bt2YFGpn6jcgAKUj6DiAdjd4lpFw85hdKrCEVN\n0FE6/V1dN2RMfjCyVSRCnTawXZwXgWHxyvkQAiSr6w10kY17RSlQOYiypok1JR4U\nakcjMS9cmvqtmg5iUaQqqcT5NJ0hGA==\n-----END CERTIFICATE-----\n","domain":"devsandbox.space","id":"arn:aws:acm:us-east-1:513410254332:certificate/996360c1-8ef5-454c-a8dc-2f062eff1fed","key_types":null,"most_recent":false,"status":"ISSUED","statuses":["ISSUED"],"tags":{"Environment":"test"},"types":null},"sensitive_values":{"statuses":[false],"tags":{}}}],"address":"module.cloudfront"},{"resources":[{"address":"module.route53.data.aws_route53_zone.public-zone","mode":"data","type":"aws_route53_zone","name":"public-zone","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:route53:::hostedzone/Z01883253QKY9CDJWMTTM","caller_reference":"62abbaba-598c-448a-9a31-e7b267070082","comment":"development sandbox domain from me","id":"Z01883253QKY9CDJWMTTM","linked_service_description":null,"linked_service_principal":null,"name":"devsandbox.space","name_servers":["ns-49.awsdns-06.com","ns-1775.awsdns-29.co.uk","ns-1305.awsdns-35.org","ns-976.awsdns-58.net"],"primary_name_server":"ns-49.awsdns-06.com","private_zone":false,"resource_record_set_count":5,"tags":{"Name":"dev-sandbox"},"vpc_id":null,"zone_id":"Z01883253QKY9CDJWMTTM"},"sensitive_values":{"name_servers":[false,false,false,false],"tags":{}}}],"address":"module.route53"}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"4.67.0","expressions":{"region":{"references":["data.terraform_remote_state.network.outputs.region","data.terraform_remote_state.network.outputs","data.terraform_remote_state.network"]}}},"local":{"name":"local","full_name":"registry.terraform.io/hashicorp/local","version_constraint":"~\u003e 2.4"},"null":{"name":"null","full_name":"registry.terraform.io/hashicorp/null","version_constraint":"~\u003e 3.2"},"terraform":{"name":"terraform","full_name":"terraform.io/builtin/terraform"}},"root_module":{"outputs":{"cloudfront_aliases":{"expression":{"references":["module.cloudfront.cloudfront_aliases","module.cloudfront"]}},"cloudfront_arn":{"expression":{"references":["module.cloudfront.cloudfront_arn","module.cloudfront"]}},"cloudfront_domain_name":{"expression":{"references":["module.cloudfront.cloudfront_domain_name","module.cloudfront"]}},"cloudfront_hosted_zone_id":{"expression":{"references":["module.cloudfront.cloudfront_hosted_zone_id","module.cloudfront"]}},"cloudfront_id":{"expression":{"references":["module.cloudfront.cloudfront_id","module.cloudfront"]}},"cloudfront_status":{"expression":{"references":["module.cloudfront.cloudfront_status","module.cloudfront"]}}},"resources":[{"address":"data.terraform_remote_state.compute","mode":"data","type":"terraform_remote_state","name":"compute","provider_config_key":"terraform","expressions":{"backend":{"constant_value":"s3"},"config":{"references":["var.terraform_state_bucket"]}},"schema_version":0},{"address":"data.terraform_remote_state.network","mode":"data","type":"terraform_remote_state","name":"network","provider_config_key":"terraform","expressions":{"backend":{"constant_value":"s3"},"config":{"references":["var.terraform_state_bucket"]}},"schema_version":0}],"module_calls":{"cloudfront":{"source":"./modules/cloudfront","expressions":{"additional_domain_name":{"references":["var.additional_domain_name"]},"alb_api_domain_name":{"references":["var.alb_api_domain_name"]},"certificate_domain_name":{"references":["var.certificate_domain_name"]},"project_name":{"references":["data.terraform_remote_state.network.outputs.project_name","data.terraform_remote_state.network.outputs","data.terraform_remote_state.network"]},"public_alb_arn":{"references":["data.terraform_remote_state.compute.outputs.public_alb_arn","data.terraform_remote_state.compute.outputs","data.terraform_remote_state.compute"]}},"module":{"outputs":{"cloudfront_aliases":{"expression":{"references":["aws_cloudfront_distribution.my_distribution.aliases","aws_cloudfront_distribution.my_distribution"]}},"cloudfront_arn":{"expression":{"references":["aws_cloudfront_distribution.my_distribution.arn","aws_cloudfront_distribution.my_distribution"]}},"cloudfront_domain_name":{"expression":{"references":["aws_cloudfront_distribution.my_distribution.domain_name","aws_cloudfront_distribution.my_distribution"]}},"cloudfront_hosted_zone_id":{"expression":{"references":["aws_cloudfront_distribution.my_distribution.hosted_zone_id","aws_cloudfront_distribution.my_distribution"]}},"cloudfront_id":{"expression":{"references":["aws_cloudfront_distribution.my_distribution.id","aws_cloudfront_distribution.my_distribution"]}},"cloudfront_status":{"expression":{"references":["aws_cloudfront_distribution.my_distribution.status","aws_cloudfront_distribution.my_distribution"]}}},"resources":[{"address":"aws_cloudfront_cache_policy.caching_optimized","mode":"managed","type":"aws_cloudfront_cache_policy","name":"caching_optimized","provider_config_key":"aws","expressions":{"comment":{"constant_value":"test comment"},"default_ttl":{"constant_value":50},"max_ttl":{"constant_value":100},"min_ttl":{"constant_value":1},"name":{"constant_value":"Caching_optimized"},"parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookie_behavior":{"constant_value":"none"}}],"enable_accept_encoding_brotli":{"constant_value":true},"enable_accept_encoding_gzip":{"constant_value":true},"headers_config":[{"header_behavior":{"constant_value":"none"}}],"query_strings_config":[{"query_string_behavior":{"constant_value":"none"}}]}]},"schema_version":0},{"address":"aws_cloudfront_distribution.my_distribution","mode":"managed","type":"aws_cloudfront_distribution","name":"my_distribution","provider_config_key":"aws","expressions":{"aliases":{"references":["var.additional_domain_name"]},"default_cache_behavior":[{"allowed_methods":{"constant_value":["GET","HEAD","OPTIONS","PUT","POST","PATCH","DELETE"]},"cache_policy_id":{"references":["aws_cloudfront_cache_policy.caching_optimized.id","aws_cloudfront_cache_policy.caching_optimized"]},"cached_methods":{"constant_value":["GET","HEAD","OPTIONS"]},"origin_request_policy_id":{"references":["aws_cloudfront_origin_request_policy.only-host-header.id","aws_cloudfront_origin_request_policy.only-host-header"]},"target_origin_id":{"references":["var.alb_api_domain_name"]},"viewer_protocol_policy":{"constant_value":"redirect-to-https"}}],"enabled":{"constant_value":true},"origin":[{"connection_attempts":{"constant_value":3},"connection_timeout":{"constant_value":10},"custom_header":[{"name":{"constant_value":"X-Custom-Header"},"value":{"constant_value":"random-value-123456"}}],"custom_origin_config":[{"http_port":{"constant_value":80},"https_port":{"constant_value":443},"origin_keepalive_timeout":{"constant_value":5},"origin_protocol_policy":{"constant_value":"https-only"},"origin_read_timeout":{"constant_value":30},"origin_ssl_protocols":{"constant_value":["TLSv1.2"]}}],"domain_name":{"references":["var.alb_api_domain_name"]},"origin_id":{"references":["var.alb_api_domain_name"]}}],"restrictions":[{"geo_restriction":[{"restriction_type":{"constant_value":"none"}}]}],"tags":{"references":["var.project_name"]},"viewer_certificate":[{"acm_certificate_arn":{"references":["data.aws_acm_certificate.issued.arn","data.aws_acm_certificate.issued"]},"minimum_protocol_version":{"constant_value":"TLSv1.2_2018"},"ssl_support_method":{"constant_value":"sni-only"}}],"web_acl_id":{"references":["aws_wafv2_web_acl.block_web_acl.arn","aws_wafv2_web_acl.block_web_acl"]}},"schema_version":1},{"address":"aws_cloudfront_origin_request_policy.only-host-header","mode":"managed","type":"aws_cloudfront_origin_request_policy","name":"only-host-header","provider_config_key":"aws","expressions":{"comment":{"constant_value":"Forwards only the Host header to ALB origin"},"cookies_config":[{"cookie_behavior":{"constant_value":"all"}}],"headers_config":[{"header_behavior":{"constant_value":"whitelist"},"headers":[{"items":{"constant_value":["host"]}}]}],"name":{"constant_value":"only-host-header"},"query_strings_config":[{"query_string_behavior":{"constant_value":"none"}}]},"schema_version":0},{"address":"aws_wafv2_ip_set.block_ipset","mode":"managed","type":"aws_wafv2_ip_set","name":"block_ipset","provider_config_key":"aws","expressions":{"addresses":{"constant_value":["103.179.122.6/32","203.187.235.23/32"]},"description":{"constant_value":"IP Set for blocking specific IPs"},"ip_address_version":{"constant_value":"IPV4"},"name":{"constant_value":"block-ip-set"},"scope":{"constant_value":"CLOUDFRONT"},"tags":{"constant_value":{"Environment":"production"}}},"schema_version":0},{"address":"aws_wafv2_web_acl.alb_acl","mode":"managed","type":"aws_wafv2_web_acl","name":"alb_acl","provider_config_key":"aws","expressions":{"default_action":[{"block":[{}]}],"description":{"constant_value":"Minimal WAF: only CloudFront header allowed - block simple SQLi and  XSS"},"name":{"references":["var.alb_waf_name"]},"rule":[{"action":[{"allow":[{}]}],"name":{"constant_value":"allow-cloudfront-header"},"priority":{"constant_value":1},"statement":[{"byte_match_statement":[{"field_to_match":[{"single_header":[{"name":{"references":["var.cloudfront_header_name"]}}]}],"positional_constraint":{"constant_value":"EXACTLY"},"search_string":{"references":["var.cloudfront_header_value"]},"text_transformation":[{"priority":{"constant_value":0},"type":{"constant_value":"NONE"}}]}]}],"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":true},"metric_name":{"constant_value":"allow-cloudfront-header"},"sampled_requests_enabled":{"constant_value":true}}]},{"action":[{"block":[{}]}],"name":{"constant_value":"block-simple-sqli"},"priority":{"constant_value":10},"statement":[{"sqli_match_statement":[{"field_to_match":[{"query_string":[{}]}],"text_transformation":[{"priority":{"constant_value":0},"type":{"constant_value":"URL_DECODE"}},{"priority":{"constant_value":1},"type":{"constant_value":"LOWERCASE"}}]}]}],"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":true},"metric_name":{"constant_value":"block-simple-sqli"},"sampled_requests_enabled":{"constant_value":true}}]},{"action":[{"block":[{}]}],"name":{"constant_value":"block-simple-xss"},"priority":{"constant_value":11},"statement":[{"xss_match_statement":[{"field_to_match":[{"query_string":[{}]}],"text_transformation":[{"priority":{"constant_value":0},"type":{"constant_value":"URL_DECODE"}},{"priority":{"constant_value":1},"type":{"constant_value":"HTML_ENTITY_DECODE"}},{"priority":{"constant_value":2},"type":{"constant_value":"LOWERCASE"}}]}]}],"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":true},"metric_name":{"constant_value":"block-simple-xss"},"sampled_requests_enabled":{"constant_value":true}}]}],"scope":{"constant_value":"REGIONAL"},"tags":{"constant_value":{"Environment":"dev"}},"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":true},"metric_name":{"references":["var.alb_waf_name"]},"sampled_requests_enabled":{"constant_value":true}}]},"schema_version":0},{"address":"aws_wafv2_web_acl.block_web_acl","mode":"managed","type":"aws_wafv2_web_acl","name":"block_web_acl","provider_config_key":"aws","expressions":{"default_action":[{"allow":[{}]}],"description":{"constant_value":"Web ACL with IP Set rule"},"name":{"constant_value":"block-web-acl"},"rule":[{"action":[{"captcha":[{}]}],"name":{"constant_value":"block-ip-set-rule"},"priority":{"constant_value":1},"statement":[{"ip_set_reference_statement":[{"arn":{"references":["aws_wafv2_ip_set.block_ipset.arn","aws_wafv2_ip_set.block_ipset"]}}]}],"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":true},"metric_name":{"constant_value":"block-ip-set-rule"},"sampled_requests_enabled":{"constant_value":true}}]},{"action":[{"block":[{}]}],"name":{"constant_value":"block-bad-useragents"},"priority":{"constant_value":3},"statement":[{"byte_match_statement":[{"field_to_match":[{"single_header":[{"name":{"constant_value":"user-agent"}}]}],"positional_constraint":{"constant_value":"CONTAINS"},"search_string":{"constant_value":"curl"},"text_transformation":[{"priority":{"constant_value":0},"type":{"constant_value":"NONE"}}]}]}],"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":true},"metric_name":{"constant_value":"block-bad-useragents"},"sampled_requests_enabled":{"constant_value":true}}]},{"action":[{"block":[{}]}],"name":{"constant_value":"block-empty-useragent"},"priority":{"constant_value":4},"statement":[{"size_constraint_statement":[{"comparison_operator":{"constant_value":"LT"},"field_to_match":[{"single_header":[{"name":{"constant_value":"user-agent"}}]}],"size":{"constant_value":1},"text_transformation":[{"priority":{"constant_value":0},"type":{"constant_value":"NONE"}}]}]}],"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":true},"metric_name":{"constant_value":"block-empty-useragent"},"sampled_requests_enabled":{"constant_value":true}}]},{"action":[{"block":[{}]}],"name":{"constant_value":"limit-ip-rate"},"priority":{"constant_value":2},"statement":[{"rate_based_statement":[{"aggregate_key_type":{"constant_value":"IP"},"limit":{"constant_value":100}}]}],"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":true},"metric_name":{"constant_value":"limit-ip-rate"},"sampled_requests_enabled":{"constant_value":true}}]}],"scope":{"constant_value":"CLOUDFRONT"},"tags":{"constant_value":{"Environment":"dev"}},"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":true},"metric_name":{"constant_value":"not-block-ip-set"},"sampled_requests_enabled":{"constant_value":true}}]},"schema_version":0},{"address":"aws_wafv2_web_acl_association.assoc","mode":"managed","type":"aws_wafv2_web_acl_association","name":"assoc","provider_config_key":"aws","expressions":{"resource_arn":{"references":["var.public_alb_arn"]},"web_acl_arn":{"references":["aws_wafv2_web_acl.alb_acl.arn","aws_wafv2_web_acl.alb_acl"]}},"schema_version":0},{"address":"data.aws_acm_certificate.issued","mode":"data","type":"aws_acm_certificate","name":"issued","provider_config_key":"aws","expressions":{"domain":{"references":["var.certificate_domain_name"]},"statuses":{"constant_value":["ISSUED"]}},"schema_version":0}],"variables":{"additional_domain_name":{},"alb_api_domain_name":{},"alb_waf_name":{"default":"alb-waf-customHeader-sqli-xss"},"certificate_domain_name":{},"cloudfront_header_name":{"default":"X-Custom-Header"},"cloudfront_header_value":{"default":"random-value-123456"},"project_name":{},"public_alb_arn":{"description":"ARN of ALB (load balancer listener or ALB) to associate with WAF"}}}},"route53":{"source":"./modules/route53","expressions":{"cloudfront_distro_aliases":{"references":["module.cloudfront.cloudfront_aliases","module.cloudfront"]},"cloudfront_domain_name":{"references":["module.cloudfront.cloudfront_domain_name","module.cloudfront"]},"cloudfront_hosted_zone_id":{"references":["module.cloudfront.cloudfront_hosted_zone_id","module.cloudfront"]},"hosted_zone_name":{"references":["var.certificate_domain_name"]},"public_alb_dns_name":{"references":["data.terraform_remote_state.compute.outputs.alb_dns_name","data.terraform_remote_state.compute.outputs","data.terraform_remote_state.compute"]},"public_alb_zone_id":{"references":["data.terraform_remote_state.compute.outputs.alb_zone_id","data.terraform_remote_state.compute.outputs","data.terraform_remote_state.compute"]}},"module":{"resources":[{"address":"aws_route53_record.api_alb_alias","mode":"managed","type":"aws_route53_record","name":"api_alb_alias","provider_config_key":"aws","expressions":{"alias":[{"evaluate_target_health":{"constant_value":false},"name":{"references":["var.public_alb_dns_name"]},"zone_id":{"references":["var.public_alb_zone_id"]}}],"name":{"references":["var.hosted_zone_name"]},"type":{"constant_value":"A"},"zone_id":{"references":["data.aws_route53_zone.public-zone.zone_id","data.aws_route53_zone.public-zone"]}},"schema_version":2},{"address":"aws_route53_record.cloudfront","mode":"managed","type":"aws_route53_record","name":"cloudfront","provider_config_key":"aws","expressions":{"alias":[{"evaluate_target_health":{"constant_value":false},"name":{"references":["var.cloudfront_domain_name"]},"zone_id":{"references":["var.cloudfront_hosted_zone_id"]}}],"name":{"references":["each.value"]},"type":{"constant_value":"A"},"zone_id":{"references":["data.aws_route53_zone.public-zone.zone_id","data.aws_route53_zone.public-zone"]}},"schema_version":2,"for_each_expression":{"references":["var.cloudfront_distro_aliases"]}},{"address":"aws_route53_record.cloudfront_record","mode":"managed","type":"aws_route53_record","name":"cloudfront_record","provider_config_key":"aws","expressions":{"alias":[{"evaluate_target_health":{"constant_value":false},"name":{"references":["var.cloudfront_domain_name"]},"zone_id":{"references":["var.cloudfront_hosted_zone_id"]}}],"name":{"references":["data.aws_route53_zone.public-zone.name","data.aws_route53_zone.public-zone"]},"type":{"constant_value":"A"},"zone_id":{"references":["data.aws_route53_zone.public-zone.zone_id","data.aws_route53_zone.public-zone"]}},"schema_version":2},{"address":"data.aws_route53_zone.public-zone","mode":"data","type":"aws_route53_zone","name":"public-zone","provider_config_key":"aws","expressions":{"name":{"references":["var.hosted_zone_name"]},"private_zone":{"constant_value":false}},"schema_version":0}],"variables":{"cloudfront_distro_aliases":{},"cloudfront_domain_name":{},"cloudfront_hosted_zone_id":{},"hosted_zone_name":{"default":"devsandbox.space"},"public_alb_dns_name":{},"public_alb_zone_id":{}}}}},"variables":{"additional_domain_name":{},"alb_api_domain_name":{},"certificate_domain_name":{},"region":{},"terraform_state_bucket":{}}}},"relevant_attributes":[{"resource":"data.terraform_remote_state.network","attribute":["outputs"]},{"resource":"module.cloudfront.data.aws_acm_certificate.issued","attribute":["arn"]},{"resource":"module.cloudfront.aws_cloudfront_cache_policy.caching_optimized","attribute":["id"]},{"resource":"module.cloudfront.aws_cloudfront_distribution.my_distribution","attribute":["aliases"]},{"resource":"data.terraform_remote_state.compute","attribute":["outputs"]},{"resource":"module.cloudfront.aws_cloudfront_distribution.my_distribution","attribute":["status"]},{"resource":"module.cloudfront.aws_cloudfront_distribution.my_distribution","attribute":["arn"]},{"resource":"module.cloudfront.aws_cloudfront_origin_request_policy.only-host-header","attribute":["id"]},{"resource":"module.cloudfront.aws_cloudfront_distribution.my_distribution","attribute":["id"]},{"resource":"module.cloudfront.aws_wafv2_ip_set.block_ipset","attribute":["arn"]},{"resource":"module.cloudfront.aws_wafv2_web_acl.block_web_acl","attribute":["arn"]},{"resource":"module.cloudfront.aws_cloudfront_distribution.my_distribution","attribute":["domain_name"]},{"resource":"module.route53.data.aws_route53_zone.public-zone","attribute":["name"]},{"resource":"module.cloudfront.aws_cloudfront_distribution.my_distribution","attribute":["hosted_zone_id"]},{"resource":"module.cloudfront.aws_wafv2_web_acl.alb_acl","attribute":["arn"]},{"resource":"module.route53.data.aws_route53_zone.public-zone","attribute":["zone_id"]}],"timestamp":"2025-11-03T20:20:26Z","applyable":true,"complete":true,"errored":false}
